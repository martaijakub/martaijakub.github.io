<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marta &amp; Jakub - Wedding Invitation</title>
      <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Dancing+Script:wght@700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
	<script src="https://widget.cloudinary.com/v2.0/global/all.js"></script>
	<link rel="stylesheet" href="styles.css">
	<script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
	</script>
	<script type="text/javascript">
	   (function(){
		  emailjs.init({
			publicKey: "MmXQul_uJJvS260l9",
		  });
	   })();
	</script>
</head>
<body>

<!-- Falling Petals -->
    <div class="petals" id="petals"></div>

	<!-- Loading Animation -->
    <div class="loading" id="loading">
        <div class="heart"></div>
    </div>
	<!-- Codes -->
	<div class="code-modal" id="codeModal" style="display:none;">

	  <div class="code-modal-content">
	  	   <div class="language-toggle" style="display: flex; justify-content:center;">
                <button id="langEn" class="lang-btn active" onclick="switchLanguage('en')">EN</button>
                <span class="lang-separator">|</span>
                <button id="langPl" class="lang-btn" onclick="switchLanguage('pl')">PL</button>
            </div>
	    <h2>Please enter your invitation code</h2>
	    <input type="text" id="inviteCodeInput" placeholder="Invitation Code" autocomplete="off" />
	    <button id="validateCodeBtn">Submit</button>
	    <div id="codeError" style="color:#c00;display:none;">Invalid code... Please try again.</div>
	  </div>
	</div>

    <!-- Navigation -->
    <nav id="navbar">
        <div class="nav-container">
            <ul>
                <li><a href="#hero" data-translate="nav_home">Home</a></li>
                <li><a href="#details" data-translate="nav_details">Details</a></li>
				<!--<li><a href="#mapa" data-translate="navmap">Plan Sto≈Ç√≥w</a></li>-->
                <li><a href="#rsvp" data-translate="nav_rsvp">RSVP</a></li>
				<!--<li><a href="#bingo" data-translate="nav_bingo">Wedding Bingo</a></li>-->
            </ul>
            <div class="language-toggle">
                <button id="langEn" class="lang-btn active" onclick="switchLanguage('en')">EN</button>
                <span class="lang-separator">|</span>
                <button id="langPl" class="lang-btn" onclick="switchLanguage('pl')">PL</button>
            </div>
        </div>
    </nav>
<div class="main-content">
    <!-- Hero Section -->
    <section id="hero" class="hero">
        <div class="floating-heart">üíï</div>
        <div class="floating-heart">üíñ</div>
        <div class="floating-heart">üíó</div>
        
        <div class="container">
            <div class="hero-content fade-in">
                <h1 class="couple-names" data-translate="couple_names">Marta &amp; Jakub</h1>
                <p class="wedding-date" data-translate="wedding_date">August 08th, 2026</p>
                <p class="invitation-text" data-translate="youre_invited">You're cordially invited to celebrate our special day</p>
            </div>
        </div>
        <div class="scroll-hint">
            <span>üëáüèº üíù üëáüèº</span>
        </div>
    </section>
	
    <!-- Wedding Details Section -->
    <section id="details" class="details">
        <div class="container">
            <h2 class="section-title fade-in" data-translate="wedding_details">Wedding Details</h2>
            <p class="section-subtitle fade-in" data-translate="details_subtitle">All the important information for our special day</p>
            
            <div class="details-grid">
                <div class="detail-card fade-in">
                    <div class="detail-icon">‚õ™</div>
                    <h3 class="detail-title" data-translate="ceremony">Ceremony</h3>
                    <div class="detail-info">
                        <strong data-translate="ceremony_venue">St. James Church</strong><br>
                        <span data-translate="ceremony_address">Gdansk Oliwa, Poland</span><br>
                        <strong data-translate="ceremony_time">2:00 PM</strong>
                    </div>
                </div>
                
                <div class="detail-card fade-in">
                    <div class="detail-icon">ü•Ç</div>
                    <h3 class="detail-title" data-translate="reception">Reception</h3>
                    <div class="detail-info">
                        <strong data-translate="reception_venue">Tabun</strong><br>
                        <span data-translate="reception_address">Konna 29<br>80-174 Otomin, Poland</span><br>
                        <strong data-translate="reception_time">4:00 PM</strong>
                    </div>
                </div>
                
                <div class="detail-card fade-in">
                    <div class="detail-icon">üëî</div>
                    <h3 class="detail-title" data-translate="dress_code">Dress Code</h3>
                    <div class="detail-info">
                        <strong data-translate="dress_code_formal">Formal Attire</strong><br>
                        <span data-translate="dress_code_description">We kindly request formal attire.<br>Ladies: cocktail dress or gown<br>Gentlemen: suit or tuxedo</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
	<!--<section id="bingo" class="bingo-section">
	  <div class="container">
		<h2 data-translate="bingo_title">Wedding Bingo Challenge</h2>
		<p data-translate="bingo_subtitle">Capture moments, mark your card, and win prizes!</p>

		<div class="bingo-instructions">
		  <h3 data-translate="bingo_how_to_play">How to Play</h3>
		  <ol>
			<li data-translate="bingo_rule_1">Mark squares when you witness or complete the event</li>
			<li data-translate="bingo_rule_2">Get 5 in a row (horizontal, vertical, or diagonal) to win!</li>
			<li data-translate="bingo_rule_3">Optional: Take photos to prove your Bingo and share memories</li>
		  </ol>
		</div>

		<div class="bingo-card-container">
		  <div id="bingoCard" class="bingo-card"></div>
		</div>

		<div class="bingo-controls">
		  <button id="resetBingo" class="btn-secondary" data-translate="bingo_reset">Reset Card</button>
		  <button id="newBingo" class="btn-primary" data-translate="bingo_new_card">New Card</button>
		</div>

		<div id="bingoWinModal" class="bingo-win-modal" style="display:none;">
		  <div class="bingo-win-content">
			<h2 data-translate="bingo_congrats">üéâ BINGO! üéâ</h2>
			<p data-translate="bingo_winner_message">Congratulations! Show this to the newlyweds for your prize!</p>
			<p data-translate="bingo_winner_message">Gratulacje! Poka≈º to m≈Çodej parze!</p>
			<button id="closeBingoWin" class="btn-primary" data-translate="bingo_close">Close</button>
		  </div>
		</div>

<div class="bingo-gallery">
  <h3 data-translate="bingo_gallery_title">Photo Gallery</h3>
  <p class="bingo-gallery-subtitle" data-translate="bingo_gallery_subtitle">Add photos and upload them to share with everyone!</p>
  
  <div id="uploadSection" class="upload-controls">
    <input type="file" id="localPhotoInput" accept="image/*" multiple style="display:none;">
    <label for="localPhotoInput" class="btn-add-photo" data-translate="bingo_add_photo">üì∏ Dodaj Zdjƒôcie</label>
    <button id="uploadToCloudinary" class="btn-upload-cloud" data-translate="bingo_upload_cloud" disabled>‚òÅÔ∏è Wy≈õlij do Chmury (<span id="photoCount">0</span>)</button>
    <button id="clearLocalPhotos" class="btn-clear" data-translate="bingo_clear_all">üóëÔ∏è Wyczy≈õƒá Wszystkie</button>
  </div>
  

  <div class="local-gallery-section">
    <h4 data-translate="bingo_your_photos">Twoje Zdjƒôcia (do wys≈Çania):</h4>
    <div id="localPhotoGallery" class="local-photo-gallery"></div>
  </div>
  
  <div class="cloud-gallery-section">
    <h4 data-translate="bingo_shared_photos">Udostƒôpnione Zdjƒôcia:</h4>
    <div id="cloudPhotoGallery" class="photo-gallery-grid"></div>
  </div>
</div>
	  </div>
	</section>-->
    <!-- RSVP Section -->
    <section id="rsvp" class="rsvp">
        <div class="container">
            <h2 class="section-title fade-in" data-translate="rsvp">RSVP</h2>
            <p class="section-subtitle fade-in" data-translate="rsvp_deadline">Please respond by <b>May 30th, 2026</b></p>
            
            <form class="rsvp-form fade-in" id="rsvpForm">
                <div class="form-group">
                    <label class="form-label" for="guestName" data-translate="guest_names">Guest Name(s) *</label>
                    <input type="text" id="guestName" name="guestName" class="form-control" required>
                    <div class="error" id="guestNameError" data-translate="error_name">Please enter your name(s)</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="email" data-translate="email_address">Email Address *</label>
                    <input type="email" id="email" name="email" class="form-control" required>
                    <div class="error" id="emailError" data-translate="error_email">Please enter a valid email address</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" data-translate="will_attend">Will you be attending? *</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="attendingYes" name="attending" value="TAK" required>
                            <label for="attendingYes" data-translate="yes_attending">Yes, I'll be there! üíï</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="attendingNo" name="attending" value="NIE" required>
                            <label for="attendingNo" data-translate="no_attending">Sorry, can't make it üò¢</label>
                        </div>
                    </div>
                    <div class="error" id="attendingError" data-translate="error_attendance">Please select your attendance</div>
                </div>
                
				<div class="form-group">
                    <label class="form-label" data-translate="will_attend_1">Will you be with your +1 (if on the weeding invitation is "with guest")</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" id="attendingYes" name="attending_1" value="TAK" required>
                            <label for="attendingYes_1" data-translate="yes_attending_1">YES</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" id="attendingNo" name="attending_1" value="NIE" required>
                            <label for="attendingNo_1" data-translate="no_attending_1">No</label>
                        </div>
                    </div>
                    <div class="error" id="attendingError" data-translate="error_attendance_1">Please select your answer on +1</div>
                </div>
				                
                <div class="form-group">
                    <label class="form-label" for="dietary" data-translate="dietary_restrictions">Dietary Restrictions</label>
                    <textarea id="dietary" name="dietary" class="form-control" rows="3" data-translate-placeholder="dietary_placeholder"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="message" data-translate="special_message">Special Message (Optional)</label>
                    <textarea id="message" name="message" class="form-control" rows="4" data-translate-placeholder="message_placeholder"></textarea>
                </div>
                
                <button type="submit" class="btn" data-translate="send_rsvp">Send RSVP üíå</button>
                
                <div class="success-message" id="successMessage" data-translate="thank_you_rsvp">
                    Thank you for your RSVP! We're so excited to celebrate with you! üíï
                </div>
            </form>
        </div>
    </section>
</div>
<!-- Sekcja planu sto≈Ç√≥w
<section id="mapa" class="seating-plan-section">
<div class="container">
    <h2>Znajd≈∫ swoje miejsce</h2>
    <p id="welcomeGuest" style="text-align:center; margin-bottom:30px; font-size:1.1em;">
  <span id="welcomeName"></span>! Oto Twoje miejsce.
</p>

    <div class="svg-container">
      <svg width="900" height="650" viewBox="0 0 900 650">
  <g id="prezydium">
    <rect x="180" y="50" width="540" height="60" stroke="black" fill="white" stroke-width="4" />

    <circle id="seat-1A" cx="210" cy="35" r="16" stroke="black" fill="white" />
    <circle id="seat-2A" cx="255" cy="35" r="16" stroke="black" fill="white" />
    <circle id="seat-3A" cx="300" cy="35" r="16" stroke="black" fill="white" />
    <circle id="seat-4A" cx="345" cy="35" r="16" stroke="black" fill="white" />
    <circle id="seat-5A" cx="390" cy="35" r="16" stroke="black" fill="white" />
    <circle id="seat-6A" cx="435" cy="35" r="16" stroke="black" fill="white" />
    <circle id="seat-7A" cx="480" cy="35" r="16" stroke="black" fill="white" />
    <circle id="seat-8A" cx="525" cy="35" r="16" stroke="black" fill="white" />
    <circle id="seat-9A" cx="570" cy="35" r="16" stroke="black" fill="white" />
    <circle id="seat-10A" cx="615" cy="35" r="16" stroke="black" fill="white" />
    <circle id="seat-11A" cx="660" cy="35" r="16" stroke="black" fill="white" />
    <circle id="seat-12A" cx="705" cy="35" r="16" stroke="black" fill="white" />
  </g>

 <g id="table-bc">
    <rect x="180" y="150" width="60" height="280" stroke="black" fill="white" stroke-width="4"/>
    
    <circle id="seat-1B" cx="165"  cy="180" r="14" stroke="black" fill="white"/>
    <circle id="seat-2B" cx="165"  cy="210" r="14" stroke="black" fill="white"/>
    <circle id="seat-3B" cx="165"  cy="240" r="14" stroke="black" fill="white"/>
    <circle id="seat-4B" cx="165"  cy="270" r="14" stroke="black" fill="white"/>
    <circle id="seat-5B" cx="165"  cy="300" r="14" stroke="black" fill="white"/>
    <circle id="seat-6B" cx="165"  cy="330" r="14" stroke="black" fill="white"/>
    <circle id="seat-7B" cx="165"  cy="370" r="14" stroke="black" fill="white"/>
    <circle id="seat-8B" cx="165"  cy="400" r="14" stroke="black" fill="white"/>
    
    <circle id="seat-1C" cx="255" cy="180" r="14" stroke="black" fill="white"/>
    <circle id="seat-2C" cx="255" cy="210" r="14" stroke="black" fill="white"/>
    <circle id="seat-3C" cx="255" cy="240" r="14" stroke="black" fill="white"/>
    <circle id="seat-4C" cx="255" cy="270" r="14" stroke="black" fill="white"/>
    <circle id="seat-5C" cx="255" cy="300" r="14" stroke="black" fill="white"/>
    <circle id="seat-6C" cx="255" cy="330" r="14" stroke="black" fill="white"/>
    <circle id="seat-7C" cx="255" cy="370" r="14" stroke="black" fill="white"/>
    <circle id="seat-8C" cx="255" cy="400" r="14" stroke="black" fill="white"/>
  </g>
  

</svg>

    </div>

    <button id="showBPBtn" style="display:none;" onclick="openModal()">Pobierz Boarding Pass</button>
	<select id="adminSelect" style="display:none;">
</select>
  </div>
</section>-->
<!-- MODAL BOARDING PASS (DESIGN LUFTHANSA) -->
<div id="bpModal" class="modal-overlay" onclick="closeModal(event)">
  <div class="bp-card">
    <!-- Header: Logo & Seat Info -->
    <div class="bp-header">
      <div class="bp-airline">
        <span>‚úà</span> Wedding Airlines
      </div>
      <div class="bp-header-info">
        <div>
          <div class="bp-label">GATE</div>
          <div class="bp-value-big" id="bpGate">A2</div>
        </div>
        <div>
          <div class="bp-label">SEAT</div>
          <div class="bp-value-big" id="bpSeatHeader">1A</div>
        </div>
      </div>
    </div>

    <!-- Route: Origin -> Destination -->
    <div class="bp-route">
      <div class="bp-city">
        <div class="bp-city-name">KAWALER/PANNA</div>
        <div class="bp-city-code">SGL</div>
      </div>
      <div class="bp-icon-plane">‚úà</div>
      <div class="bp-city">
        <div class="bp-city-name">MƒÑ≈ª/≈ªONA</div>
        <div class="bp-city-code" style="text-align:right;">MRD</div>
      </div>
    </div>

    <!-- Grid Details -->
    <div class="bp-grid">
      <div class="bp-grid-item">
        <div class="bp-label">FLIGHT</div>
        <div class="bp-value">MJ0826</div>
      </div>
      <div class="bp-grid-item">
        <div class="bp-label">DATE</div>
        <div class="bp-value">08AUG26</div>
      </div>
      <div class="bp-grid-item">
        <div class="bp-label">BOARDING</div>
        <div class="bp-value">16:00</div>
      </div>
      <div class="bp-grid-item">
        <div class="bp-label">GATE CLS</div>
        <div class="bp-value">16:15</div>
      </div>
    </div>

    <!-- Passenger Info -->
    <div class="bp-passenger">
      <div class="bp-label">PASSENGER</div>
      <div class="bp-passenger-name" id="bpName">BUKSINSKI, JAKUB MR</div>
      
      <div class="bp-class-status">
        <div>
          <div class="bp-label">CLASS</div>
          <div class="bp-value">VIP Guest</div>
        </div>
        <div>
          <div class="bp-label">STATUS</div>
          <div class="bp-value">CONFIRMED</div>
        </div>
      </div>
    </div>

    <!-- QR Code Section -->
    <div class="bp-qr-section">
      <div class="bp-priority">WEDDING PASS</div>
      <img id="bpQR" class="bp-qr-img" src="" alt="QR Code" />
      <div class="bp-sec-no">Sec. no. 0032</div>
    </div>

  </div>
</div>
    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p class="footer-text" data-translate="footer_message">
                "Thank you for being part of our special day"
            </p>
            
            <div class="contact-info">
                <div class="contact-item">
                    <span>üìß</span>
                    <span>080826.wesele@gmail.com</span>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Language Translations
        const translations = {
            en: {
                // Navigation
                nav_home: 'Home',
                nav_details: 'Details',
                nav_story: 'Our Story',
                nav_rsvp: 'RSVP',
				navmap: "Seating Plan",
                
                // Hero Section
                couple_names: 'Marta & Jakub',
                wedding_date: 'August 08th, 2026',
                youre_invited: "You're cordially invited to celebrate our special day",
                
                // Details Section
                wedding_details: 'Wedding Details',
                details_subtitle: 'All the important information for our special day',
                ceremony: 'Ceremony',
                reception: 'Wedding Party',
                dress_code: 'Dress Code',
                ceremony_venue: "Church (yet to be announced)",
                ceremony_address: 'Gdansk, Poland',
                ceremony_time: '2:00 PM',
                reception_venue: 'Tabun',
                reception_address: 'Konna 29<br>80-174 Otomin, Poland',
                reception_time: '4:00 PM',
                dress_code_formal: 'Formal Attire',
                dress_code_description: 'We kindly request formal attire.<br>Ladies: cocktail dress or gown<br>Gentlemen: suit or tuxedo',
                
				 // Modal z kodami
				modaltitle: "Please enter your invitation code",
			    modalplaceholder: "Invitation Code",
			    modalsubmit: "Submit",
			    modalerror: "Invalid code. Please try again.",
                // RSVP Section
                rsvp: 'RSVP',
                rsvp_deadline: 'Please respond by May 30th, 2026',
                guest_names: 'Guest Name(s) *',
                email_address: 'Email Address *',
                will_attend: 'Will you be attending? *',
				will_attend_1: 'Will you be with your +1 (if on the weeding invitation is "with guest")',
                yes_attending: "Yes, I'll be there! üíï",
                no_attending: "Sorry, can't make it üò¢",
				yes_attending_1: "YES",
				no_attending_1: "No",
                dietary_restrictions: 'Dietary Restrictions',
                special_message: 'Special Message (Optional)',
                send_rsvp: 'Send RSVP üíå',

                // Form Errors
                error_name: 'Please enter your name(s)',
                error_email: 'Please enter a valid email address',
                error_attendance: 'Please select your attendance',
                
                // Placeholders
                dietary_placeholder: 'Please let us know about any allergies or dietary restrictions',
                message_placeholder: 'Share your well wishes or any special message for the happy couple',
                
                // Messages
                thank_you_rsvp: "Thank you for your RSVP! We're so excited to celebrate with you! üíï",
                required_fields: 'Please fill in all required fields',
                
                // Footer
                footer_message: 'Thank you for being part of our special day',
                contact_us: 'Contact us'
            },
            pl: {
                // Navigation
                nav_home: 'Wesele',
                nav_details: 'Szczeg√≥≈Çy',
                nav_story: 'Nasza Historia',
                nav_rsvp: 'Potwierdzenie',
				navmap: "Plan Sto≈Ç√≥w",
                
                // Hero Section
                couple_names: 'Marta i Jakub',
                wedding_date: '08 Sierpnia 2026',
                youre_invited: 'Serdecznie zapraszamy Ciebie na ≈õwiƒôtowanie naszego wyjƒÖtkowego dnia',
                
				//Modal z kodami
				modaltitle: "Wprowad≈∫ kod zaproszenia",
			    modalplaceholder: "Kod zaproszenia",
			    modalsubmit: "Wy≈õlij",
			    modalerror: "Niepoprawny kod. Spr√≥buj ponownie.",
                // Details Section
                wedding_details: 'Szczeg√≥≈Çy ≈ölubu',
                details_subtitle: 'Wszystkie wa≈ºne informacje o naszym wyjƒÖtkowym dniu',
                ceremony: 'Ceremonia',
                reception: 'Przyjƒôcie',
                dress_code: 'Dress Code',
                ceremony_venue: 'Ko≈õci√≥≈Ç ≈öw. Jakuba',
                ceremony_address: 'Gdansk Oliwa, Poland',
                ceremony_time: '14:00',
                reception_venue: 'Tabun',
                reception_address: 'Konna 29<br>80-174 Otomin, Poland',
                reception_time: '16:00',
                dress_code_formal: 'Str√≥j Wizytowy',
                dress_code_description: 'Uprzejmie prosimy o str√≥j wizytowy.<br>Panie: suknia koktajlowa lub wieczorowa<br>Panowie: garnitur lub smoking',
                
                // RSVP Section
                rsvp: 'Potwierdzenie Obecno≈õci',
                rsvp_deadline: 'Prosimy o odpowied≈∫ do <b>30 maja 2026</b>',
                guest_names: 'Imiƒô i Nazwisko *',
                email_address: 'Adres Email *',
                will_attend: 'Czy bƒôdziesz obecny/obecna?',
				will_attend_1: 'Czy bƒôdziesz z osobƒÖ towarzyszƒÖcƒÖ (na zaproszeniu "os. towarzyszƒÖca")',
                yes_attending: 'Tak, bƒôdƒô! üíï',
                no_attending: 'Niestety, nie mogƒô przyj≈õƒá üò¢',
				yes_attending_1: "TAK",
				no_attending_1: "Nie",
                dietary_restrictions: 'Ograniczenia Dietetyczne',
                special_message: 'Specjalna Wiadomo≈õƒá (Opcjonalnie)',
                send_rsvp: 'Wy≈õlij Potwierdzenie üíå',
                
                
                // Form Errors
                error_name: 'Proszƒô podaƒá imiƒô i nazwisko',
                error_email: 'Proszƒô podaƒá prawid≈Çowy adres email',
                error_guests: 'Proszƒô wybraƒá liczbƒô go≈õci',
                error_attendance: 'Proszƒô wybraƒá obecno≈õƒá',
                
                // Placeholders
                dietary_placeholder: 'Prosimy poinformowaƒá nas o alergiach lub ograniczeniach dietetycznych',
                message_placeholder: 'Podziel siƒô ≈ºyczeniami lub specjalnƒÖ wiadomo≈õciƒÖ dla m≈Çodej pary',
                
                // Messages
                thank_you_rsvp: 'Dziƒôkujemy za potwierdzenie! Nie mo≈ºemy siƒô doczekaƒá ≈õwiƒôtowania z TobƒÖ! üíï',
                required_fields: 'Proszƒô wype≈Çniƒá wszystkie wymagane pola',
                
                // Footer
                footer_message: 'Dziƒôkujemy, ≈ºe jeste≈õcie czƒô≈õciƒÖ naszego wyjƒÖtkowego dnia',
                contact_us: 'Skontaktuj siƒô z nami'
            }
        };
        
        // Current language (default to English)
        let currentLanguage = 'en';
        function updateCodeModalTexts(lang) {
		  document.querySelector('#codeModal h2').innerText = translations[lang].modaltitle;
		  document.getElementById('inviteCodeInput').placeholder = translations[lang].modalplaceholder;
		  document.getElementById('validateCodeBtn').innerText = translations[lang].modalsubmit;
		  document.getElementById('codeError').innerText = translations[lang].modalerror;
		}
        // Language switching function
        function switchLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('lang', lang);
            // Update active language button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById('lang' + lang.charAt(0).toUpperCase() + lang.slice(1)).classList.add('active');
            
            // Update all translatable elements with fade effect
            const elements = document.querySelectorAll('[data-translate]');
            
            elements.forEach(element => {
                element.style.opacity = '0.7';
                element.style.transition = 'opacity 0.3s ease';
            });
            
            setTimeout(() => {
                elements.forEach(element => {
                    const key = element.getAttribute('data-translate');
                    if (translations[lang] && translations[lang][key]) {
                        element.innerHTML = translations[lang][key];
                    }
                });
                
                // Update placeholders
                const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
                placeholderElements.forEach(element => {
                    const key = element.getAttribute('data-translate-placeholder');
                    if (translations[lang] && translations[lang][key]) {
                        element.placeholder = translations[lang][key];
                    }
                });
                
                elements.forEach(element => {
                    element.style.opacity = '1';
                });
            }, 150);
			updateCodeModalTexts(lang);
			if (typeof bingoCard !== 'undefined' && bingoCard.length > 0) {
			  const currentMarked = new Set(markedCells); // Zachowaj zaznaczone pola
			  bingoCard = generateBingoCard(lang);
			  markedCells = currentMarked;
			  renderBingoCard();
			}
			// Od≈õwie≈º Bingo z nowym jƒôzykiem
			if (typeof refreshBingo === 'function') {
			  refreshBingo(lang);
			}
        }
        
        // Initialize language on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial placeholders
            document.getElementById('dietary').placeholder = translations[currentLanguage]['dietary_placeholder'];
            document.getElementById('message').placeholder = translations[currentLanguage]['message_placeholder'];
        });
        
        const EMAILJS_SERVICE_ID = 'PLACEHOLDER'; // Replace with your Service ID
        const EMAILJS_TEMPLATE_ID = 'template_nzzzhuy'; // Replace with your Template ID

        // Loading Animation
		window.addEventListener('load', function() {
		  setTimeout(() => {
		    document.getElementById('loading').classList.add('hidden');
		    document.getElementById('codeModal').style.display = 'flex';
		    document.body.classList.add('validate-code');
		    updateCodeModalTexts(currentLanguage);
		  }, 2000);
		

		});

        // Create Falling Petals
        function createPetals() {
            const petalsContainer = document.getElementById('petals');
            const petalCount = 50;
            
            for (let i = 0; i < petalCount; i++) {
                setTimeout(() => {
                    createPetal(petalsContainer);
                }, i * 500);
            }
            
            // Continue creating petals
            setInterval(() => {
                createPetal(petalsContainer);
            }, 500);
        }

        function createPetal(container) {
            const petal = document.createElement('div');
            petal.className = 'petal';
            
            // Random properties
            const size = Math.random() * 15 + 10;
            const leftPosition = Math.random() * 100;
            const animationDuration = Math.random() * 3 + 5;
            const delay = Math.random() * 2;
            
            petal.style.width = size + 'px';
            petal.style.height = size + 'px';
            petal.style.left = leftPosition + '%';
            petal.style.animationDuration = animationDuration + 's';
            petal.style.animationDelay = delay + 's';
            
            container.appendChild(petal);
            
            // Remove petal after animation
            setTimeout(() => {
                if (petal.parentNode) {
                    petal.parentNode.removeChild(petal);
                }
            }, (animationDuration + delay) * 1000);
        }

        // Scroll Effects
        window.addEventListener('scroll', function() {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 100) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Fade-in Animation on Scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Observe all fade-in elements
        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        // Form Validation and Submission
        document.getElementById('rsvpForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Clear previous errors
            document.querySelectorAll('.error').forEach(error => {
                error.style.display = 'none';
            });
            
            let isValid = true;
            
            // Validate guest name
            const guestName = document.getElementById('guestName').value.trim();
            if (!guestName) {
                const errorEl = document.getElementById('guestNameError');
                errorEl.textContent = translations[currentLanguage]['error_name'];
                errorEl.style.display = 'block';
                isValid = false;
            }
            
            // Validate email
            const email = document.getElementById('email').value.trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email || !emailRegex.test(email)) {
                const errorEl = document.getElementById('emailError');
                errorEl.textContent = translations[currentLanguage]['error_email'];
                errorEl.style.display = 'block';
                isValid = false;
            }
           
            
            // Validate attendance
            const attending = document.querySelector('input[name="attending"]:checked');
            if (!attending) {
                const errorEl = document.getElementById('attendingError');
                errorEl.textContent = translations[currentLanguage]['error_attendance'];
                errorEl.style.display = 'block';
                isValid = false;
            }
			// Validate attendance +1
            const attending_1 = document.querySelector('input[name="attending_1"]:checked');
            if (!attending) {
                const errorEl = document.getElementById('attendingError');
                errorEl.textContent = translations[currentLanguage]['error_attendance'];
                errorEl.style.display = 'block';
                isValid = false;
            }
            
            if (isValid) {
                // Prepare form data for EmailJS
                const formData = {
                    guest_name: guestName,
                    email: email,
                    attending: attending.value,
					attending_1: attending_1.value,
                    dietary: document.getElementById('dietary').value || (currentLanguage === 'pl' ? 'Brak' : 'None'),
                    message: document.getElementById('message').value || (currentLanguage === 'pl' ? 'Brak wiadomo≈õci' : 'No message'),
                    language: currentLanguage === 'pl' ? 'Polish' : 'English'
                };
                
                // Send email using EmailJS
                // Note: Replace the service and template IDs with your actual IDs
                emailjs.send('080826', 'template_nzzzhuy', formData)
                    .then(function(response) {
                        console.log('SUCCESS!', response.status, response.text);
                        document.getElementById('successMessage').style.display = 'block';
                        document.getElementById('rsvpForm').reset();
                        
                        // Scroll to success message
                        document.getElementById('successMessage').scrollIntoView({
                            behavior: 'smooth',
                            block: 'center'
                        });
                    }, function(error) {
                        console.log('FAILED...', error);
                        alert('ENG: RVSP can be sent only received official wedding invitation. PL: Potwierdzenie mo≈ºe zostaƒá wys≈Çane tylko po otrzymaniu w≈Ça≈õciwego kodu zaproszenia. ');
                    });
            }
        });

        // Smooth scroll for navigation links
        document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            });
        });

// Wedding Bingo Game Logic
const bingoEvents = {
  en: [
    "First Dance", "Bouquet Toss", "Selfie with Groom", "Cake Cutting", "A Toast",
    "Groom Laughing", "Dance Floor Selfie", "Bride Laughing", "Couple Kiss", "Group Photo",
    "Champagne", "Best Hairstyle", "Speech", "Father-Daughter Dance",
    "Mother-Son Dance", "Crazy Dance Move", "Guest Singing", "Someone Scheming! :o",
    "Delicious Food", "Selfie with Bride", "Tears of Joy", "Awkward Moment",
    "Photobomb", "Empty Dance Floor", "Full Dance Floor"
  ],
  pl: [
    "Pierwszy Taniec", "Rzut Bukietem", "Selfie z Panem Mlodym", "Krojenie Tortu", "Toast",
    "Pan Mlody sie smieje", "Selfie na Parkiecie", "Panna mloda sie smieje", "Poca≈Çunek Pary", "Zdjƒôcie Grupowe",
    "Szampan", "Najlepsza fryzura", "Przemowa", "Taniec Ojca z C√≥rkƒÖ",
    "Taniec Matki z Synem", "Szalony Krok Taneczny", "Go≈õƒá ≈öpiewa", "Ktos spiskuje! :o",
    "Jedzonko", "Selfie z Pania mloda", "Wzruszenie", "Niezrƒôczny Moment",
    "Fotobomba", "Pusty Parkiet", "Pe≈Çny Parkiet"
  ]
};

let bingoCard = [];
let markedCells = new Set();

function generateBingoCard(lang = 'en') {
  const events = [...bingoEvents[lang]];
  const card = [];

  // Shuffle events
  for (let i = events.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [events[i], events[j]] = [events[j], events[i]];
  }

  // Take first 24 events (25th will be FREE space)
  for (let i = 0; i < 25; i++) {
    if (i === 12) {
      card.push({ text: lang === 'en' ? 'START' : 'START', isFree: true });
    } else {
      card.push({ text: events[i < 12 ? i : i - 1], isFree: false });
    }
  }

  return card;
}

function renderBingoCard() {
  const cardElement = document.getElementById('bingoCard');
  cardElement.innerHTML = '';

  bingoCard.forEach((cell, index) => {
    const cellDiv = document.createElement('div');
    cellDiv.className = 'bingo-cell';
    cellDiv.textContent = cell.text;
    cellDiv.dataset.index = index;

    // ‚≠ê DYNAMICZNY FONT SIZE na podstawie d≈Çugo≈õci tekstu
    const textLength = cell.text.length;
    if (textLength > 25) {
      cellDiv.style.fontSize = '0.8rem';  // Bardzo d≈Çugie teksty
      cellDiv.style.lineHeight = '1.1';
    } else if (textLength > 18) {
      cellDiv.style.fontSize = '0.9rem';  // D≈Çugie teksty
      cellDiv.style.lineHeight = '1.2';
    } else if (textLength > 12) {
      cellDiv.style.fontSize = '0.95rem'; // ≈örednie teksty
    } else {
      cellDiv.style.fontSize = '1.05rem'; // Kr√≥tkie teksty
    }
	
    if (cell.isFree) {
      cellDiv.classList.add('free', 'marked');
      markedCells.add(index);
    }

    if (markedCells.has(index)) {
      cellDiv.classList.add('marked');
    }

    if (!cell.isFree) {
      cellDiv.addEventListener('click', () => toggleCell(index));
    }

    cardElement.appendChild(cellDiv);
  });
}

function toggleCell(index) {
  if (markedCells.has(index)) {
    markedCells.delete(index);
  } else {
    markedCells.add(index);
  }

  renderBingoCard();
  checkWin();
}

function checkWin() {
  const winPatterns = [
    // Rows
    [0,1,2,3,4], [5,6,7,8,9], [10,11,12,13,14], [15,16,17,18,19], [20,21,22,23,24],
    // Columns
    [0,5,10,15,20], [1,6,11,16,21], [2,7,12,17,22], [3,8,13,18,23], [4,9,14,19,24],
    // Diagonals
    [0,6,12,18,24], [4,8,12,16,20]
  ];

  for (const pattern of winPatterns) {
    if (pattern.every(index => markedCells.has(index))) {
      showWinModal();
      return;
    }
  }
}

function showWinModal() {
  // Usu≈Ñ stary modal je≈õli istnieje
  const oldModal = document.getElementById('bingoWinModal');
  if (oldModal) oldModal.remove();
  
  // Pobierz t≈Çumaczenia dla aktualnego jƒôzyka
  const congratsText = translations[currentLanguage]?.bingocongrats || 'üéâ BINGO! üéâ';
  const messageText = translations[currentLanguage]?.bingowinnermessage || '';
  const closeText = translations[currentLanguage]?.bingoclose || 'Close/Zamknij';
  
  // Stw√≥rz nowy modal dynamicznie
  const modal = document.createElement('div');
  modal.id = 'bingoWinModal';
  modal.style.cssText = `
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    background: rgba(0,0,0,0.8) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    z-index: 99999 !important;
  `;
  
  modal.innerHTML = `
    <div style="background: white; padding: 50px 40px; border-radius: 20px; text-align: center; max-width: 500px; box-shadow: 0 10px 50px rgba(212,175,55,0.5); animation: bounceIn 0.6s;">
      <h2 style="font-size: 2.5rem; color: #d4af37; margin-bottom: 20px; animation: pulse 1s infinite;">${congratsText}</h2>
      <p style="margin-bottom: 30px; font-size: 1.2rem;">${messageText}</p>
      <button onclick="document.getElementById('bingoWinModal').remove()" style="background: linear-gradient(135deg, #d4af37, #e6c965); color: white; padding: 12px 30px; border: none; border-radius: 25px; font-size: 1rem; font-weight: 600; cursor: pointer;">${closeText}</button>
    </div>
  `;
  
  document.body.appendChild(modal);
  createConfetti();
}


function createConfetti() {
  const colors = ['#d4af37', '#f7e7e1', '#ffb3c1', '#e8c5a0'];
  for (let i = 0; i < 50; i++) {
    setTimeout(() => {
      const confetti = document.createElement('div');
      confetti.style.position = 'fixed';
      confetti.style.width = '10px';
      confetti.style.height = '10px';
      confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
      confetti.style.left = Math.random() * 100 + 'vw';
      confetti.style.top = '-10px';
      confetti.style.opacity = '1';
      confetti.style.zIndex = '99999';
      confetti.style.borderRadius = '50%';
      document.body.appendChild(confetti);

      let pos = -10;
      const fall = setInterval(() => {
        pos += 5;
        confetti.style.top = pos + 'px';
        confetti.style.opacity = 1 - (pos / window.innerHeight);
        if (pos > window.innerHeight) {
          clearInterval(fall);
          confetti.remove();
        }
      }, 20);
    }, i * 30);
  }
}
// =================== CLOUDINARY KONFIGURACJA ===================
const CLOUDINARY_CONFIG = {
  cloudName: 'dyz8kvmfn', // Wklej sw√≥j cloud name tutaj
  uploadPreset: 'wedding_photos' // Nazwa preset z kroku 3
};

// =================== ZARZƒÑDZANIE LOKALNYMI ZDJƒòCIAMI ===================
let localPhotos = [];

function initLocalPhotoSystem() {
  const fileInput = document.getElementById('localPhotoInput');
  const uploadBtn = document.getElementById('uploadToCloudinary');
  const clearBtn = document.getElementById('clearLocalPhotos');
  
  // Dodawanie zdjƒôƒá lokalnie
  fileInput.addEventListener('change', handleLocalPhotoAdd);
  
  // Upload do Cloudinary
  uploadBtn.addEventListener('click', uploadAllToCloudinary);
  
  // Czyszczenie lokalnych zdjƒôƒá
  clearBtn.addEventListener('click', clearLocalPhotos);
  
  // Za≈Çaduj zapisane zdjƒôcia z localStorage
  loadLocalPhotos();
}

function handleLocalPhotoAdd(event) {
  const files = Array.from(event.target.files);
  let filesToLoad = files.length;
  if (filesToLoad === 0) return;

  files.forEach(file => {
    if (file.type.startsWith('image/')) {
      const reader = new FileReader();
      reader.onload = function(e) {
        const photoData = {
          id: Date.now() + Math.random(),
          data: e.target.result,
          name: file.name,
          size: file.size,
          timestamp: new Date().toISOString()
        };
        localPhotos.push(photoData);

        // Decrement loader, render only after all loaded
        filesToLoad--;
        if (filesToLoad === 0) {
          saveLocalPhotos();
          renderLocalGallery();
          updateUploadButton();
        }
      };
      reader.readAsDataURL(file);
    } else {
      filesToLoad--;
    }
  });

  // iOS fix: usu≈Ñ i dodaj <input>
  event.target.value = '';
  let copy = event.target.cloneNode();
  event.target.parentNode.replaceChild(copy, event.target);
  copy.addEventListener('change', handleLocalPhotoAdd);
}


function renderLocalGallery() {
  const gallery = document.getElementById('localPhotoGallery');
  
  if (localPhotos.length === 0) {
    gallery.innerHTML = '';
    gallery.classList.add('empty');
    return;
  }
  
  gallery.classList.remove('empty');
  gallery.innerHTML = localPhotos.map(photo => `
    <div class="local-photo" data-id="${photo.id}">
      <img src="${photo.data}" alt="${photo.name}">
      <button class="local-photo-remove" onclick="removeLocalPhoto('${photo.id}')" title="Usu≈Ñ zdjƒôcie">√ó</button>
    </div>
  `).join('');
}

function removeLocalPhoto(photoId) {
  localPhotos = localPhotos.filter(photo => photo.id != photoId);
  saveLocalPhotos();
  renderLocalGallery();
  updateUploadButton();
}

function clearLocalPhotos() {
  if (localPhotos.length === 0) return;
  
  if (confirm('Czy na pewno chcesz usunƒÖƒá wszystkie zdjƒôcia?')) {
    localPhotos = [];
    saveLocalPhotos();
    renderLocalGallery();
    updateUploadButton();
  }
}

function updateUploadButton() {
  const uploadBtn = document.getElementById('uploadToCloudinary');
  
  if (uploadBtn) {
    // Znajd≈∫ span wewnƒÖtrz przycisku lub stw√≥rz go
    let countSpan = uploadBtn.querySelector('#photoCount');
    if (!countSpan) {
      // Je≈õli span nie istnieje, aktualizuj ca≈ÇƒÖ zawarto≈õƒá przycisku
      const translatedText = translations[currentLanguage]?.bingo_upload_cloud || '‚òÅÔ∏è Wy≈õlij do Chmury';
      uploadBtn.innerHTML = `${translatedText} (${localPhotos.length})`;
    } else {
      countSpan.textContent = localPhotos.length;
    }
    
    uploadBtn.disabled = localPhotos.length === 0;
  }
}

function saveLocalPhotos() {
  localStorage.setItem('weddingLocalPhotos', JSON.stringify(localPhotos));
}

function loadLocalPhotos() {
  const saved = localStorage.getItem('weddingLocalPhotos');
  if (saved) {
    localPhotos = JSON.parse(saved);
    renderLocalGallery();
    updateUploadButton();
  }
}

// =================== UPLOAD DO CLOUDINARY (BULK) ===================
async function uploadAllToCloudinary() {
  if (localPhotos.length === 0) return;
  
  const uploadBtn = document.getElementById('uploadToCloudinary');
  const originalText = uploadBtn.innerHTML;
  
  uploadBtn.disabled = true;
  uploadBtn.innerHTML = '‚è≥ Wysy≈Çanie...';
  
  let successCount = 0;
  let errorCount = 0;
  
  for (let i = 0; i < localPhotos.length; i++) {
    const photo = localPhotos[i];
    
    try {
      // Convert base64 to blob
      const response = await fetch(photo.data);
      const blob = await response.blob();
      
      // Upload to Cloudinary
      const formData = new FormData();
      formData.append('file', blob);
      formData.append('upload_preset', CLOUDINARY_CONFIG.uploadPreset);
      formData.append('folder', 'wedding_bingo');
      
      const uploadResponse = await fetch(`https://api.cloudinary.com/v1_1/${CLOUDINARY_CONFIG.cloudName}/image/upload`, {
        method: 'POST',
        body: formData
      });
      
      const result = await uploadResponse.json();
      
      if (result.secure_url) {
        addPhotoToCloudGallery(result.secure_url, result.public_id);
        successCount++;
      } else {
        throw new Error('Upload failed');
      }
      
      // Update progress
      uploadBtn.innerHTML = `‚è≥ Wysy≈Çanie... (${i + 1}/${localPhotos.length})`;
      
    } catch (error) {
      console.error('Upload error:', error);
      errorCount++;
    }
  }
  
  // Show results
  if (successCount > 0) {
    // Clear local photos after successful upload
    localPhotos = [];
    saveLocalPhotos();
    renderLocalGallery();
    updateUploadButton();
    
    alert(`‚úÖ Wys≈Çano ${successCount} zdjƒôƒá!${errorCount > 0 ? ` (${errorCount} b≈Çƒôd√≥w)` : ''}`);
  } else {
    alert('‚ùå WystƒÖpi≈Ç b≈ÇƒÖd podczas wysy≈Çania zdjƒôƒá.');
  }
  
  uploadBtn.disabled = false;
  uploadBtn.innerHTML = originalText;
}

// =================== GALERIA CLOUDINARY ===================
function addPhotoToCloudGallery(imageUrl, publicId) {
  const gallery = document.getElementById('cloudPhotoGallery');
  const photoDiv = document.createElement('div');
  photoDiv.className = 'gallery-photo';
  photoDiv.innerHTML = `
    <img src="${imageUrl}" alt="Wedding moment" loading="lazy">
    <div class="photo-overlay">
      <span class="photo-time">${new Date().toLocaleTimeString()}</span>
    </div>
  `;
  gallery.appendChild(photoDiv);
  
  // Smooth scroll do nowego zdjƒôcia
  photoDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

// =================== T≈ÅUMACZENIA ===================
// Dodaj do istniejƒÖcego obiektu translations:
if (typeof translations !== 'undefined') {
  translations.en.bingo_add_photo = "üì∏ Add Photo";
  translations.en.bingo_upload_cloud = "‚òÅÔ∏è Upload to Cloud";
  translations.en.bingo_clear_all = "üóëÔ∏è Clear All";
  translations.en.bingo_your_photos = "Your Photos (to upload):";
  translations.en.bingo_shared_photos = "Shared Photos:";
  
  translations.pl.bingo_add_photo = "üì∏ Dodaj Zdjƒôcie";
  translations.pl.bingo_upload_cloud = "‚òÅÔ∏è Wy≈õlij do Chmury";
  translations.pl.bingo_clear_all = "üóëÔ∏è Wyczy≈õƒá Wszystkie";
  translations.pl.bingo_your_photos = "Twoje Zdjƒôcia (do wys≈Çania):";
  translations.pl.bingo_shared_photos = "Udostƒôpnione Zdjƒôcia:";
}

// Initialize Bingo
function initBingo() {
  const lang = currentLanguage || 'en';
  bingoCard = generateBingoCard(lang);
  markedCells = new Set([12]); // Free space
  renderBingoCard();

  // Event listeners
  document.getElementById('resetBingo').addEventListener('click', () => {
    markedCells = new Set([12]);
    renderBingoCard();
  });

  document.getElementById('newBingo').addEventListener('click', () => {
    bingoCard = generateBingoCard(lang);
    markedCells = new Set([12]);
    renderBingoCard();
  });

  document.getElementById('closeBingoWin').addEventListener('click', () => {
    document.getElementById('bingoWinModal').style.display = 'none';
  });
}
function refreshBingo(lang) {
  const currentMarked = new Set(markedCells); // Zachowaj zaznaczenia
  bingoCard = generateBingoCard(lang);
  markedCells = currentMarked;
  renderBingoCard();
}
// Add to existing translation object
if (typeof translations !== 'undefined') {
  translations.en.nav_bingo = "Wedding Bingo";
  translations.en.bingo_title = "Wedding Bingo Challenge";
  translations.en.bingo_subtitle = "Capture moments, mark your card, and share memories";
  translations.en.bingo_how_to_play = "How to Play";
  translations.en.bingo_rule_1 = "Mark squares when you witness or complete the event";
  translations.en.bingo_rule_2 = "Get 5 in a row (horizontal, vertical, or diagonal) to win!";
  translations.en.bingo_rule_3 = "Optional: Take photos to prove your Bingo and share memories";
  translations.en.bingo_reset = "Reset Card";
  translations.en.bingo_new_card = "New Card";
  translations.en.bingo_congrats = "üéâ BINGO! üéâ";
  translations.en.bingo_winner_message = "Congratulations! Show this to the newlyweds!";
  translations.en.bingo_close = "Close";
  translations.en.bingo_gallery_title = "Photo Gallery";
  translations.en.bingo_gallery_subtitle = "Upload photos of your Bingo moments!";
  translations.en.bingo_upload_photo = "üì∏ Upload Photo";

  translations.pl.nav_bingo = "Weselne Bingo";
  translations.pl.bingo_title = "Wyzwanie Weselnego Bingo";
  translations.pl.bingo_subtitle = "Uchwytuj momenty, zaznaczaj kartƒô i buduj wspomnienia";
  translations.pl.bingo_how_to_play = "Jak Graƒá";
  translations.pl.bingo_rule_1 = "Zaznaczaj pola gdy jeste≈õ ≈õwiadkiem lub wykonujesz zadanie";
  translations.pl.bingo_rule_2 = "U≈Ç√≥≈º 5 w linii (poziomo, pionowo lub uko≈õnie) aby wygraƒá!";
  translations.pl.bingo_rule_3 = "Opcjonalnie: R√≥b zdjƒôcia jako dow√≥d Bingo i dziel siƒô wspomnieniami";
  translations.pl.bingo_reset = "Resetuj Kartƒô";
  translations.pl.bingo_new_card = "Nowa Karta";
  translations.pl.bingo_congrats = "üéâ BINGO! üéâ";
  translations.pl.bingo_winner_message = "Gratulacje! Poka≈º to m≈Çodej parze!";
  translations.pl.bingo_close = "Zamknij";
  translations.pl.bingo_gallery_title = "Galeria Zdjƒôƒá";
  translations.pl.bingo_gallery_subtitle = "Dodaj zdjƒôcia swoich moment√≥w Bingo!";
  translations.pl.bingo_upload_photo = "üì∏ Dodaj Zdjƒôcie";
}
let loggedGuest = null;

document.getElementById('validateCodeBtn').onclick = function() {
  const code = document.getElementById('inviteCodeInput').value.trim().toUpperCase();
  
  // 1. Sprawdzamy kody og√≥lne lub szukamy go≈õcia w bazie
  const globalCodes = ['MJ26', 'MJ2026'];
  if (globalCodes.includes(code)) {
    loggedGuest = { name: "Go≈õƒá", pnr: code, table: null, seat: null, gate: "A1" };
  } else {
    loggedGuest = guests.find(g => g.pnr === code);
  }

  if (loggedGuest) {
    const modal = document.getElementById('codeModal');
    modal.classList.add('fade-out');
    setTimeout(() => {
      modal.style.display = 'none';
      document.body.classList.remove('validate-code');
      document.querySelector('.main-content').classList.add('fade-in');
      if (typeof createPetals === 'function') createPetals();

      /** ADMIN MODE dla Jakuba **/
      if (code === "JAKUB") {
        const sel = document.getElementById('adminSelect');
        sel.innerHTML = '';
        guests.forEach(g => {
          const opt = document.createElement('option');
          opt.value = g.pnr;
          opt.text = `${g.name} (${g.pnr})`;
          sel.appendChild(opt);
        });
        sel.style.display = 'block';

        sel.onchange = function() {
          const guest = guests.find(g => g.pnr === sel.value);
          showGuestDetails(guest);
          currentGuest = guest;
        };
        
        showGuestDetails(loggedGuest);
        currentGuest = loggedGuest;
      } else {
        /** TRYB DLA GO≈öCIA **/
        showGuestDetails(loggedGuest);
        currentGuest = loggedGuest;
        const adminSel = document.getElementById('adminSelect');
        if (adminSel) adminSel.style.display = 'none';
      }
    }, 800);
  } else {
    // 2. Naprawiony b≈ÇƒÖd ReferenceError
    document.getElementById('codeError').style.display = 'block';
    if (typeof updateCodeModalTexts === 'function') {
        updateCodeModalTexts(currentLanguage);
    }
  }
};



		// =================== INICJALIZACJA CLOUDINARY ===================
document.addEventListener('DOMContentLoaded', function() {
  initBingo();
  
  if (typeof cloudinary !== 'undefined') {
    setTimeout(() => {
      initLocalPhotoSystem();
    }, 200);
  } else {
    console.error('Cloudinary widget not loaded');
  }
});
 // ‚ÄûBaza‚Äù go≈õci - ka≈ºdy seat = X (numer sto≈Çu) + YZ (identyfikator miejsca, np. A1, A2)
const guests = [
  { name: "Jakub Buksi≈Ñski", table: "1", seat: "A", gate: "A2", pnr: "JAKUB" },
  { name: "Marta Gudyka", table: "1", seat: "B", gate: "A1", pnr: "MARTA" },
  { name: "WESELE MARTY I JAKUBA", pnr: "MJ26" },
  { name: "WESELE MARTY I JAKUBA", pnr: "MJ2026" }
];
if (loggedGuest) {
  document.getElementById('welcomeName').innerText = loggedGuest.name;
  // ...inne dzia≈Çania
} else {
  // wy≈õwietl komunikat o b≈Çƒôdzie u≈ºytkownikowi, np. ‚ÄûNiepoprawny kod zaproszenia‚Äù
}
    // Rickroll QR
    const qrBase = "https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=https://www.youtube.com/watch?v=dQw4w9WgXcQ";
	let currentGuest = null;
	

function highlightSeat(table, seat) {
  resetMap();
  const el = document.getElementById(`seat-${table}${seat}`);
  if (el) {
    el.setAttribute('fill', '#d4af37');
    el.setAttribute('stroke', '#333');
  }
}

function resetMap() {
  document.querySelectorAll('circle[id^="seat-"]').forEach(c => {
    c.setAttribute('fill', '#eee');
    c.setAttribute('stroke', '#aaa');
  });
}
// Pod≈õwietl miejsce po autoryzacji kodu
function showGuestDetails(guest) {
    if (!guest) return;
    currentGuest = guest;
    document.getElementById('welcomeNamespan').innerText = guest.name;
    document.getElementById('welcomeGuest').style.display = 'block';
    document.getElementById('showBPBtn').style.display = 'block';

    if (guest.table && guest.seat) {
        highlightSeat(guest.table, guest.seat);
    }
}
function onShowBoardingPass() {
  if (!loggedGuest) return;
  document.getElementById('bpName').innerText = loggedGuest.name.toUpperCase();
  document.getElementById('bpGate').innerText = loggedGuest.gate;
  document.getElementById('bpSeatHeader').innerText = loggedGuest.table + loggedGuest.seat;
  document.getElementById('bpQR').src = qrBase;
  document.getElementById('bpModal').style.display = 'flex';
}
document.getElementById('showBPBtn').addEventListener('click', openModal);

function openModal() {
  if (!currentGuest) return;
  document.getElementById('bpName').innerText = currentGuest.name.toUpperCase();
  document.getElementById('bpGate').innerText = currentGuest.gate;
  document.getElementById('bpSeatHeader').innerText = currentGuest.table + currentGuest.seat;
  document.getElementById('bpQR').src = qrBase;
  document.getElementById('bpModal').style.display = 'flex';
}

  function closeModal(e) {
    // Zamyka tylko jak klikniesz w t≈Ço (overlay)
    if (e.target.id === 'bpModal') {
      document.getElementById('bpModal').style.display = 'none';
    }
  }
    </script>
</body>
</html>
